# ๐ ะะพะดัะพะฑะฝะพะต ััะบะพะฒะพะดััะฒะพ ะฟะพ ะพะฑัะฐะฑะพัะบะต ะพัะธะฑะพะบ

## ๐ฏ ะะฐัะตะผ ะฝัะถะฝะฐ ะพะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ?

### ะงัะพ ะฟัะพะธััะพะดะธั ะะะ ะพะฑัะฐะฑะพัะบะธ ะพัะธะฑะพะบ:

```javascript
// ะะปะพัะพะน ะบะพะด - ะฑะตะท ะพะฑัะฐะฑะพัะบะธ ะพัะธะฑะพะบ
app.get("/", (req, res) => {
  const response = await axios.get(API_URL);
  res.render("index.ejs", { content: response.data });
});
```

**ะงัะพ ะผะพะถะตั ะฟะพะนัะธ ะฝะต ัะฐะบ:**

1. ะะพะปัะทะพะฒะฐัะตะปั ะฝะต ะฒะฒะตะป ะดะฐะฝะฝัะต โ `response.data` ะฑัะดะตั `undefined` โ ะพัะธะฑะบะฐ
2. API ะฝะตะดะพัััะฟะตะฝ โ ะทะฐะฟัะพั ัะฟะฐะดะตั โ ะฟัะธะปะพะถะตะฝะธะต ะบัะฐัะฝะตััั
3. ะัะตะฟะฐัะฐั ะฝะต ะฝะฐะนะดะตะฝ โ ะฟัััะพะน ะผะฐััะธะฒ โ ะฟะพะบะฐะถะตััั ะฟัััะฐั ัััะฐะฝะธัะฐ
4. ะะตะฟัะฐะฒะธะปัะฝัะน URL โ ะพัะธะฑะบะฐ ัะตัะธ โ ะฟัะธะปะพะถะตะฝะธะต ัะฟะฐะดะตั

**ะะตะทัะปััะฐั:** ะะพะปัะทะพะฒะฐัะตะปั ะฒะธะดะธั ะฑะตะปัะน ัะบัะฐะฝ ะธะปะธ ัะตัะฝะธัะตัะบะพะต ัะพะพะฑัะตะฝะธะต ะพะฑ ะพัะธะฑะบะต.

### ะงัะพ ะฟัะพะธััะพะดะธั ะก ะพะฑัะฐะฑะพัะบะพะน ะพัะธะฑะพะบ:

```javascript
// ะฅะพัะพัะธะน ะบะพะด - ั ะพะฑัะฐะฑะพัะบะพะน ะพัะธะฑะพะบ
app.get("/", async (req, res) => {
  try {
    // ะัะพะฒะตััะตะผ ะดะฐะฝะฝัะต
    if (!req.query.medicinalproduct) {
      return res.render("index.ejs", {
        content: "ะะพะถะฐะปัะนััะฐ, ะฒะฒะตะดะธัะต ะฟัะตะฟะฐัะฐั",
      });
    }

    // ะะตะปะฐะตะผ ะทะฐะฟัะพั
    const response = await axios.get(API_URL);

    // ะัะพะฒะตััะตะผ ัะตะทัะปััะฐั
    if (!response.data.results) {
      return res.render("index.ejs", {
        content: "ะัะตะฟะฐัะฐั ะฝะต ะฝะฐะนะดะตะฝ",
      });
    }

    // ะัั ะะ - ะฟะพะบะฐะทัะฒะฐะตะผ ัะตะทัะปััะฐั
    res.render("index.ejs", { content: response.data });
  } catch (error) {
    // ะะฑัะฐะฑะฐััะฒะฐะตะผ ะพัะธะฑะบะธ
    res.render("index.ejs", {
      content: "ะัะพะธะทะพัะปะฐ ะพัะธะฑะบะฐ. ะะพะฟัะพะฑัะนัะต ะฟะพะทะถะต.",
    });
  }
});
```

**ะะตะทัะปััะฐั:** ะะพะปัะทะพะฒะฐัะตะปั ะฒัะตะณะดะฐ ะฒะธะดะธั ะฟะพะฝััะฝะพะต ัะพะพะฑัะตะฝะธะต, ะฟัะธะปะพะถะตะฝะธะต ะฝะต ะฟะฐะดะฐะตั.

---

## ๐ ะขัะธ ะพัะฝะพะฒะฝัั ัะธะฟะฐ ะพัะธะฑะพะบ (ะฟะพะดัะพะฑะฝะพ)

### 1. **ะัะธะฑะบะธ ะฒะฐะปะธะดะฐัะธะธ** (ะฟัะพะฒะตัะบะฐ ะดะฐะฝะฝัั)

**ะงัะพ ััะพ:** ะะพะปัะทะพะฒะฐัะตะปั ะฒะฒะตะป ะฝะตะฟัะฐะฒะธะปัะฝัะต ะดะฐะฝะฝัะต ะธะปะธ ะฝะต ะฒะฒะตะป ะฒะพะพะฑัะต.

**ะะพะณะดะฐ ะฟัะพะธััะพะดะธั:**

- ะะพะปัะทะพะฒะฐัะตะปั ะฝะต ะทะฐะฟะพะปะฝะธะป ะฟะพะปะต
- ะะพะปัะทะพะฒะฐัะตะปั ะฒะฒะตะป ะฟััััั ัััะพะบั
- ะะพะปัะทะพะฒะฐัะตะปั ะฒะฒะตะป ะดะฐะฝะฝัะต ะฒ ะฝะตะฟัะฐะฒะธะปัะฝะพะผ ัะพัะผะฐัะต

**ะะฐะบ ะพะฑัะฐะฑะฐััะฒะฐัั:**

```javascript
// ะัะพะฒะตััะตะผ, ััะพ ะดะฐะฝะฝัะต ะตััั
if (!req.query.medicinalproduct) {
  // ! ะพะทะฝะฐัะฐะตั "ะะ" - ัะพ ะตััั "ะตัะปะธ ะะะข ะดะฐะฝะฝัั"
  // ะัะปะธ ะดะฐะฝะฝัั ะฝะตั, ะฒัะฟะพะปะฝะตะฝะธะต ะบะพะดะฐ ะพััะฐะฝะฐะฒะปะธะฒะฐะตััั ะทะดะตัั (return)
  // ะธ ะฟะพะบะฐะทัะฒะฐะตััั ัะพะพะฑัะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั
  return res.render("index.ejs", {
    content: "ะะพะถะฐะปัะนััะฐ, ะฒะฒะตะดะธัะต ะฝะฐะทะฒะฐะฝะธะต ะฟัะตะฟะฐัะฐัะฐ",
  });
}

// ะัะปะธ ะผั ะดะพัะปะธ ััะดะฐ, ะทะฝะฐัะธั ะดะฐะฝะฝัะต ะตััั, ะฟัะพะดะพะปะถะฐะตะผ ัะฐะฑะพัั
```

**ะะพัะตะผั `return`?**

- `return` ะพััะฐะฝะฐะฒะปะธะฒะฐะตั ะฒัะฟะพะปะฝะตะฝะธะต ััะฝะบัะธะธ
- ะะตะท `return` ะบะพะด ะฟัะพะดะพะปะถะธััั ะดะฐะปััะต ะธ ะฟะพะฟััะฐะตััั ะธัะฟะพะปัะทะพะฒะฐัั ะฟััััะต ะดะฐะฝะฝัะต
- ะญัะพ ะทะฐัะธัะฐ ะพั ะพัะธะฑะพะบ

**ะะฐะทะฝัะต ัะฟะพัะพะฑั ะฟัะพะฒะตัะบะธ:**

```javascript
// ะัะพะฒะตัะบะฐ ะฝะฐ ะฟัััะพัั
if (!req.query.medicinalproduct) { ... }

// ะัะพะฒะตัะบะฐ ะฝะฐ ะฟััััั ัััะพะบั
if (req.query.medicinalproduct === "") { ... }

// ะัะพะฒะตัะบะฐ ะฝะฐ undefined ะธ null
if (req.query.medicinalproduct == null) { ... }

// ะะพะผะฑะธะฝะธัะพะฒะฐะฝะฝะฐั ะฟัะพะฒะตัะบะฐ (ัะฐะผะฐั ะฝะฐะดะตะถะฝะฐั)
if (!req.query.medicinalproduct || req.query.medicinalproduct.trim() === "") {
  // trim() ัะฑะธัะฐะตั ะฟัะพะฑะตะปั ะฒ ะฝะฐัะฐะปะต ะธ ะบะพะฝัะต
  // "   " ะฟะพัะปะต trim() ััะฐะฝะตั ""
}
```

---

### 2. **ะัะธะฑะบะธ ะฑะธะทะฝะตั-ะปะพะณะธะบะธ** (ะดะฐะฝะฝัะต ะฝะต ะฝะฐะนะดะตะฝั)

**ะงัะพ ััะพ:** ะะฐะฟัะพั ะฒัะฟะพะปะฝะธะปัั ััะฟะตัะฝะพ, ะฝะพ ะดะฐะฝะฝัั ะฝะตั.

**ะะพะณะดะฐ ะฟัะพะธััะพะดะธั:**

- ะัะตะฟะฐัะฐั ะฝะต ะฝะฐะนะดะตะฝ ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั
- API ะฒะตัะฝัะป ะฟัััะพะน ะผะฐััะธะฒ
- ะะฐะฝะฝัะต ะตััั, ะฝะพ ะพะฝะธ ะฝะต ะฒ ะฝัะถะฝะพะผ ัะพัะผะฐัะต

**ะะฐะบ ะพะฑัะฐะฑะฐััะฒะฐัั:**

```javascript
.then((response) => {
  // response - ััะพ ะพัะฒะตั ะพั API
  // response.data - ััะพ ะดะฐะฝะฝัะต ะธะท ะพัะฒะตัะฐ
  // response.data.results - ััะพ ะผะฐััะธะฒ ัะตะทัะปััะฐัะพะฒ

  // ะัะพะฒะตััะตะผ: ะตััั ะปะธ ะฒะพะพะฑัะต results?
  if (!response.data.results) {
    // ะัะปะธ results ะฝะตั (undefined ะธะปะธ null)
    return res.render("index.ejs", {
      content: "ะะฐะฝะฝัะต ะฝะต ะฝะฐะนะดะตะฝั"
    });
  }

  // ะัะพะฒะตััะตะผ: ะฝะต ะฟัััะพะน ะปะธ ะผะฐััะธะฒ?
  if (response.data.results.length === 0) {
    // length - ััะพ ะดะปะธะฝะฐ ะผะฐััะธะฒะฐ
    // ะัะปะธ ะดะปะธะฝะฐ = 0, ะทะฝะฐัะธั ะผะฐััะธะฒ ะฟัััะพะน
    return res.render("index.ejs", {
      content: "ะัะตะฟะฐัะฐั ะฝะต ะฝะฐะนะดะตะฝ. ะัะพะฒะตัััะต ะฟัะฐะฒะธะปัะฝะพััั ะฝะฐะฟะธัะฐะฝะธั."
    });
  }

  // ะะพะผะฑะธะฝะธัะพะฒะฐะฝะฝะฐั ะฟัะพะฒะตัะบะฐ (ัะฐะผะฐั ะฝะฐะดะตะถะฝะฐั):
  if (!response.data.results || response.data.results.length === 0) {
    // ะญัะพ ะพะทะฝะฐัะฐะตั: "ะตัะปะธ ะะะข results ะะะ ะดะปะธะฝะฐ = 0"
    // || ะพะทะฝะฐัะฐะตั "ะะะ" - ััะฐะฑะพัะฐะตั, ะตัะปะธ ัะพัั ะฑั ะพะดะฝะพ ััะปะพะฒะธะต true
    return res.render("index.ejs", {
      content: "ะัะตะฟะฐัะฐั ะฝะต ะฝะฐะนะดะตะฝ"
    });
  }

  // ะัะปะธ ะผั ะดะพัะปะธ ััะดะฐ, ะทะฝะฐัะธั ะดะฐะฝะฝัะต ะตััั ะธ ะพะฝะธ ะฝะต ะฟััััะต
  // ะะพะถะฝะพ ะฑะตะทะพะฟะฐัะฝะพ ะพะฑัะฐะฑะฐััะฒะฐัั
  res.render("index.ejs", {
    content: response.data.results.map(item => item.term).join(", ")
  });
})
```

**ะะพัะตะผั ััะพ ะฒะฐะถะฝะพ?**

- ะะตะท ะฟัะพะฒะตัะบะธ: `response.data.results.map()` ัะฟะฐะดะตั ั ะพัะธะฑะบะพะน, ะตัะปะธ `results` ะฟัััะพะน
- ะก ะฟัะพะฒะตัะบะพะน: ะฟะพะปัะทะพะฒะฐัะตะปั ัะฒะธะดะธั ะฟะพะฝััะฝะพะต ัะพะพะฑัะตะฝะธะต

**ะงัะพ ัะฐะบะพะต `||` (ะะะ)?**

```javascript
// ะฃัะปะพะฒะธะต: A || B
// ะกัะฐะฑะพัะฐะตั, ะตัะปะธ ัะพัั ะฑั ะพะดะฝะพ ะธะท ััะปะพะฒะธะน true

if (!response.data.results || response.data.results.length === 0) {
  // ะกัะฐะฑะพัะฐะตั ะตัะปะธ:
  // - response.data.results ะพััััััะฒัะตั (undefined/null) ะะะ
  // - ะดะปะธะฝะฐ ะผะฐััะธะฒะฐ = 0
}
```

---

### 3. **ะขะตัะฝะธัะตัะบะธะต ะพัะธะฑะบะธ** (ัะตัั, ัะตัะฒะตั, ะบะพะด)

**ะงัะพ ััะพ:** ะงัะพ-ัะพ ะฟะพัะปะพ ะฝะต ัะฐะบ ะฝะฐ ัะตัะฝะธัะตัะบะพะผ ััะพะฒะฝะต.

**ะะพะณะดะฐ ะฟัะพะธััะพะดะธั:**

- ะะตั ะธะฝัะตัะฝะตัะฐ
- API ัะตัะฒะตั ะฝะตะดะพัััะฟะตะฝ
- ะะตะฟัะฐะฒะธะปัะฝัะน URL
- ะัะธะฑะบะฐ ะฒ ะบะพะดะต
- ะัะตะฒััะตะฝะพ ะฒัะตะผั ะพะถะธะดะฐะฝะธั

**ะะฐะบ ะพะฑัะฐะฑะฐััะฒะฐัั:**

```javascript
.catch((error) => {
  // catch ะปะพะฒะธั ะะกะ ะพัะธะฑะบะธ, ะบะพัะพััะต ะฟัะพะธะทะพัะปะธ ะฒ .then()
  // error - ััะพ ะพะฑัะตะบั ั ะธะฝัะพัะผะฐัะธะตะน ะพะฑ ะพัะธะฑะบะต

  // ะกะฝะฐัะฐะปะฐ ะปะพะณะธััะตะผ ะดะปั ัะตะฑั (ััะพะฑั ะฒะธะดะตัั ะฒ ะบะพะฝัะพะปะธ)
  console.error("Error:", error);

  // ะกะพะทะดะฐะตะผ ะฟะตัะตะผะตะฝะฝัั ะดะปั ัะพะพะฑัะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปั
  let errorMessage = "ะัะธะฑะบะฐ ะฟัะธ ะฟะพะธัะบะต ะฟัะตะฟะฐัะฐัะฐ. ";

  // ะขะตะฟะตัั ะพะฟัะตะดะตะปัะตะผ ัะธะฟ ะพัะธะฑะบะธ
  // ะฃ Axios ะตััั 3 ัะธะฟะฐ ะพัะธะฑะพะบ:

  if (error.response) {
    // ะกะะฃะงะะ 1: API ะฒะตัะฝัะป ะพัะธะฑะบั
    // ะญัะพ ะทะฝะฐัะธั: ะทะฐะฟัะพั ะดะพัะตะป ะดะพ ัะตัะฒะตัะฐ, ะฝะพ ัะตัะฒะตั ะฒะตัะฝัะป ะพัะธะฑะบั
    // ะะฐะฟัะธะผะตั: 404 (ะฝะต ะฝะฐะนะดะตะฝะพ), 400 (ะฝะตะฟัะฐะฒะธะปัะฝัะน ะทะฐะฟัะพั), 500 (ะพัะธะฑะบะฐ ัะตัะฒะตัะฐ)

    // error.response.status - ะบะพะด ะพัะธะฑะบะธ (404, 500 ะธ ั.ะด.)
    // error.response.data - ะดะฐะฝะฝัะต ะพะฑ ะพัะธะฑะบะต ะพั ัะตัะฒะตัะฐ

    errorMessage += error.response.data?.error?.message ||
                    `ะกัะฐััั: ${error.response.status}`;

    // ะงัะพ ัะฐะบะพะต ?. (optional chaining)?
    // error.response.data?.error?.message ะพะทะฝะฐัะฐะตั:
    // "ะะพะฟัะพะฑัะน ะฒะทััั error.response.data.error.message,
    // ะฝะพ ะตัะปะธ ะฝะฐ ะบะฐะบะพะผ-ัะพ ััะฐะฟะต ะฑัะดะตั undefined/null, ะฒะตัะฝะธ undefined"
    // ะญัะพ ะทะฐัะธัะฐะตั ะพั ะพัะธะฑะบะธ "Cannot read property of undefined"

  } else if (error.request) {
    // ะกะะฃะงะะ 2: ะะฐะฟัะพั ะพัะฟัะฐะฒะปะตะฝ, ะฝะพ ะพัะฒะตัะฐ ะฝะตั
    // ะญัะพ ะทะฝะฐัะธั: ะทะฐะฟัะพั ััะตะป, ะฝะพ ัะตัะฒะตั ะฝะต ะพัะฒะตัะธะป
    // ะัะธัะธะฝั: ะฝะตั ะธะฝัะตัะฝะตัะฐ, ัะตัะฒะตั ะฝะตะดะพัััะฟะตะฝ, ัะฐะนะผะฐัั

    errorMessage += "ะะต ัะดะฐะปะพัั ะฟะพะปััะธัั ะพัะฒะตั ะพั ัะตัะฒะตัะฐ.";

  } else {
    // ะกะะฃะงะะ 3: ะัะธะฑะบะฐ ะฟัะธ ะฝะฐัััะพะนะบะต ะทะฐะฟัะพัะฐ
    // ะญัะพ ะทะฝะฐัะธั: ะพัะธะฑะบะฐ ะฒ ัะฐะผะพะผ ะบะพะดะต
    // ะัะธัะธะฝั: ะฝะตะฟัะฐะฒะธะปัะฝัะน URL, ะฝะตะฟัะฐะฒะธะปัะฝัะต ะฟะฐัะฐะผะตััั

    errorMessage += "ะัะธะฑะบะฐ ะฟัะธ ะฒัะฟะพะปะฝะตะฝะธะธ ะทะฐะฟัะพัะฐ.";
  }

  // ะะพะบะฐะทัะฒะฐะตะผ ัะพะพะฑัะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั
  res.render("index.ejs", { content: errorMessage });
})
```

**ะะธะทัะฐะปัะฝะฐั ััะตะผะฐ ะพะฑัะฐะฑะพัะบะธ ะพัะธะฑะพะบ Axios:**

```
ะะฐะฟัะพั ะพัะฟัะฐะฒะปะตะฝ
    โ
    โโโ ะฃัะฟะตั โ .then() โ ะัะพะฒะตัะบะฐ ะดะฐะฝะฝัั โ ะฃัะฟะตั
    โ
    โโโ ะัะธะฑะบะฐ โ .catch()
                    โ
            ะะฟัะตะดะตะปัะตะผ ัะธะฟ:
                    โโโ error.response โ API ะฒะตัะฝัะป ะพัะธะฑะบั (404, 500)
                    โโโ error.request โ ะะตั ะพัะฒะตัะฐ (ะฝะตั ะธะฝัะตัะฝะตัะฐ)
                    โโโ else โ ะัะธะฑะบะฐ ะฒ ะบะพะดะต (ะฝะตะฟัะฐะฒะธะปัะฝัะน URL)
```

---

## ๐ ะฃะฝะธะฒะตััะฐะปัะฝัะน ัะฐะฑะปะพะฝ ะพะฑัะฐะฑะพัะบะธ ะพัะธะฑะพะบ (ะฟะพัะฐะณะพะฒะพ)

### ะจะะ 1: ะัะพะฒะตัะบะฐ ะฒัะพะดะฝัั ะดะฐะฝะฝัั (ะฒะฐะปะธะดะฐัะธั)

**ะงัะพ ะดะตะปะฐะตะผ:** ะัะพะฒะตััะตะผ ะดะฐะฝะฝัะต ะะะะะ ัะตะผ, ะบะฐะบ ะธั ะธัะฟะพะปัะทะพะฒะฐัั.

**ะะพัะตะผั:** ะงัะพะฑั ะฝะต ะดะตะปะฐัั ะทะฐะฟัะพั ั ะฟััััะผะธ ะดะฐะฝะฝัะผะธ.

**ะะฐะบ:**

```javascript
// ะจะะ 1.1: ะัะพะฒะตััะตะผ, ััะพ ะดะฐะฝะฝัะต ะตััั
if (!req.query.medicinalproduct) {
  // ะัะปะธ ะดะฐะฝะฝัั ะฝะตั - ะพััะฐะฝะฐะฒะปะธะฒะฐะตะผัั ะธ ะฟะพะบะฐะทัะฒะฐะตะผ ัะพะพะฑัะตะฝะธะต
  return res.render("index.ejs", {
    content: "ะะพะถะฐะปัะนััะฐ, ะฒะฒะตะดะธัะต ะฝะฐะทะฒะฐะฝะธะต ะฟัะตะฟะฐัะฐัะฐ",
  });
}

// ะจะะ 1.2: ะัะปะธ ะฝัะถะฝะพ, ะฟัะพะฒะตััะตะผ ัะพัะผะฐั ะดะฐะฝะฝัั
// ะะฐะฟัะธะผะตั, ะตัะปะธ ะฝัะถะตะฝ email:
if (!req.query.email.includes("@")) {
  return res.render("index.ejs", {
    content: "ะะฒะตะดะธัะต ะฟัะฐะฒะธะปัะฝัะน email",
  });
}

// ะัะปะธ ะผั ะดะพัะปะธ ััะดะฐ - ะดะฐะฝะฝัะต ะฒะฐะปะธะดะฝั, ะฟัะพะดะพะปะถะฐะตะผ
```

**ะงัะพ ะฟัะพะธััะพะดะธั ะฟะพัะฐะณะพะฒะพ:**

1. ะะพะปัะทะพะฒะฐัะตะปั ะพัะฟัะฐะฒะปัะตั ัะพัะผั
2. ะะพะด ะฟัะพะฒะตััะตั: `if (!req.query.medicinalproduct)`
   - ะัะปะธ ะดะฐะฝะฝัั ะฝะตั โ `return` ะพััะฐะฝะฐะฒะปะธะฒะฐะตั ะฒัะฟะพะปะฝะตะฝะธะต, ะฟะพะบะฐะทัะฒะฐะตััั ัะพะพะฑัะตะฝะธะต
   - ะัะปะธ ะดะฐะฝะฝัะต ะตััั โ ะบะพะด ะฟัะพะดะพะปะถะฐะตััั ะดะฐะปััะต

---

### ะจะะ 2: ะัะพะฒะตัะบะฐ ัะตะทัะปััะฐัะฐ (ะฑะธะทะฝะตั-ะปะพะณะธะบะฐ)

**ะงัะพ ะดะตะปะฐะตะผ:** ะัะพะฒะตััะตะผ ะดะฐะฝะฝัะต ะะะกะะ ะฟะพะปััะตะฝะธั ะพัะฒะตัะฐ ะพั API.

**ะะพัะตะผั:** API ะผะพะถะตั ะฒะตัะฝััั ััะฟะตัะฝัะน ะพัะฒะตั, ะฝะพ ั ะฟััััะผะธ ะดะฐะฝะฝัะผะธ.

**ะะฐะบ:**

```javascript
.then((response) => {
  // response - ััะพ ะพะฑัะตะบั ั ะพัะฒะตัะพะผ ะพั API
  // ะกัััะบัััะฐ response:
  // {
  //   data: { ... },      // ะะฐะฝะฝัะต ะพั ัะตัะฒะตัะฐ
  //   status: 200,        // ะะพะด ััะฐัััะฐ
  //   headers: { ... }    // ะะฐะณะพะปะพะฒะบะธ
  // }

  // ะจะะ 2.1: ะัะพะฒะตััะตะผ, ััะพ data ัััะตััะฒัะตั
  if (!response.data) {
    return res.render("index.ejs", {
      content: "ะะฐะฝะฝัะต ะฝะต ะฟะพะปััะตะฝั"
    });
  }

  // ะจะะ 2.2: ะัะพะฒะตััะตะผ, ััะพ results ัััะตััะฒัะตั
  if (!response.data.results) {
    return res.render("index.ejs", {
      content: "ะะตะทัะปััะฐัั ะฝะต ะฝะฐะนะดะตะฝั"
    });
  }

  // ะจะะ 2.3: ะัะพะฒะตััะตะผ, ััะพ results ะฝะต ะฟัััะพะน ะผะฐััะธะฒ
  if (response.data.results.length === 0) {
    return res.render("index.ejs", {
      content: "ะัะตะฟะฐัะฐั ะฝะต ะฝะฐะนะดะตะฝ"
    });
  }

  // ะะพะผะฑะธะฝะธัะพะฒะฐะฝะฝะฐั ะฟัะพะฒะตัะบะฐ (ะฒัะต ะฒ ะพะดะฝะพะผ):
  if (!response.data.results || response.data.results.length === 0) {
    // ะญัะพ ัะธัะฐะตััั ะบะฐะบ:
    // "ะัะปะธ ะะะข results ะะะ ะดะปะธะฝะฐ = 0"
    return res.render("index.ejs", {
      content: "ะัะตะฟะฐัะฐั ะฝะต ะฝะฐะนะดะตะฝ"
    });
  }

  // ะจะะ 2.4: ะัะปะธ ะผั ะดะพัะปะธ ััะดะฐ - ะดะฐะฝะฝัะต ะตััั ะธ ะพะฝะธ ะฒะฐะปะธะดะฝั
  // ะะพะถะฝะพ ะฑะตะทะพะฟะฐัะฝะพ ะพะฑัะฐะฑะฐััะฒะฐัั
  const results = response.data.results.map(item => item.term);
  res.render("index.ejs", {
    content: results.join(", ")
  });
})
```

**ะงัะพ ะฟัะพะธััะพะดะธั ะฟะพัะฐะณะพะฒะพ:**

1. API ะฒะตัะฝัะป ะพัะฒะตั
2. ะะพะด ะฟะพะฟะฐะดะฐะตั ะฒ `.then()`
3. ะัะพะฒะตััะตะผ ะดะฐะฝะฝัะต:
   - ะัะปะธ ะดะฐะฝะฝัั ะฝะตั โ ะฟะพะบะฐะทัะฒะฐะตะผ ัะพะพะฑัะตะฝะธะต, ะพััะฐะฝะฐะฒะปะธะฒะฐะตะผัั
   - ะัะปะธ ะดะฐะฝะฝัะต ะตััั โ ะพะฑัะฐะฑะฐััะฒะฐะตะผ ะธั

---

### ะจะะ 3: ะะฑัะฐะฑะพัะบะฐ ัะตัะฝะธัะตัะบะธั ะพัะธะฑะพะบ

**ะงัะพ ะดะตะปะฐะตะผ:** ะะพะฒะธะผ ะฒัะต ะพัะธะฑะบะธ, ะบะพัะพััะต ะผะพะณัั ะฟัะพะธะทะพะนัะธ.

**ะะพัะตะผั:** ะะฐัะธัะฐะตะผ ะฟัะธะปะพะถะตะฝะธะต ะพั ะฟะฐะดะตะฝะธั.

**ะะฐะบ:**

```javascript
.catch((error) => {
  // ะญัะพั ะฑะปะพะบ ะฒัะฟะพะปะฝะธััั, ะตัะปะธ ะฟัะพะธะทะพัะปะฐ ะะฎะะะฏ ะพัะธะฑะบะฐ
  // ะฒ ะฑะปะพะบะต .then() ะธะปะธ ะฒ ัะฐะผะพะผ ะทะฐะฟัะพัะต

  // ะจะะ 3.1: ะะพะณะธััะตะผ ะพัะธะฑะบั ะดะปั ัะตะฑั (ััะพะฑั ะฒะธะดะตัั ะฒ ะบะพะฝัะพะปะธ)
  console.error("Error:", error);
  // ะญัะพ ะฟะพะผะพะถะตั ัะตะฑะต ะพัะปะฐะดะธัั ะฟัะพะฑะปะตะผั

  // ะจะะ 3.2: ะกะพะทะดะฐะตะผ ะฑะฐะทะพะฒะพะต ัะพะพะฑัะตะฝะธะต
  let errorMessage = "ะัะธะฑะบะฐ ะฟัะธ ะฟะพะธัะบะต ะฟัะตะฟะฐัะฐัะฐ. ";

  // ะจะะ 3.3: ะะฟัะตะดะตะปัะตะผ ัะธะฟ ะพัะธะฑะบะธ
  // ะฃ Axios ะตััั 3 ัะธะฟะฐ ะพัะธะฑะพะบ:

  if (error.response) {
    // ะขะะ 1: API ะฒะตัะฝัะป ะพัะธะฑะบั
    // ะญัะพ ะทะฝะฐัะธั: ะทะฐะฟัะพั ะดะพัะตะป ะดะพ ัะตัะฒะตัะฐ, ัะตัะฒะตั ะพัะฒะตัะธะป, ะฝะพ ั ะพัะธะฑะบะพะน

    // ะัะธะผะตัั ะบะพะดะพะฒ ะพัะธะฑะพะบ:
    // 400 - Bad Request (ะฝะตะฟัะฐะฒะธะปัะฝัะน ะทะฐะฟัะพั)
    // 401 - Unauthorized (ะฝะตั ะฐะฒัะพัะธะทะฐัะธะธ)
    // 404 - Not Found (ะฝะต ะฝะฐะนะดะตะฝะพ)
    // 500 - Internal Server Error (ะพัะธะฑะบะฐ ัะตัะฒะตัะฐ)

    // ะะตัะตะผ ัะพะพะฑัะตะฝะธะต ะพะฑ ะพัะธะฑะบะต ะพั ัะตัะฒะตัะฐ, ะตัะปะธ ะพะฝะพ ะตััั
    errorMessage += error.response.data?.error?.message ||
                    `ะกัะฐััั: ${error.response.status}`;

    // ะงัะพ ะดะตะปะฐะตั optional chaining (?.)?
    // error.response.data?.error?.message
    // ะญัะพ ะฑะตะทะพะฟะฐัะฝัะน ะดะพัััะฟ ะบ ะฒะปะพะถะตะฝะฝัะผ ัะฒะพะนััะฒะฐะผ
    // ะัะปะธ ะฝะฐ ะปัะฑะพะผ ััะฐะฟะต ะฑัะดะตั undefined/null, ะฒะตัะฝะตััั undefined
    // ะะตะท ?. ะฑัะปะพ ะฑั: error.response.data.error.message
    // ะ ะตัะปะธ data = undefined, ะฑัะปะฐ ะฑั ะพัะธะฑะบะฐ "Cannot read property of undefined"

  } else if (error.request) {
    // ะขะะ 2: ะะฐะฟัะพั ะพัะฟัะฐะฒะปะตะฝ, ะฝะพ ะพัะฒะตัะฐ ะฝะตั
    // ะญัะพ ะทะฝะฐัะธั: ะทะฐะฟัะพั ััะตะป, ะฝะพ ัะตัะฒะตั ะฝะต ะพัะฒะตัะธะป

    // ะัะธัะธะฝั:
    // - ะะตั ะธะฝัะตัะฝะตัะฐ
    // - ะกะตัะฒะตั ะฝะตะดะพัััะฟะตะฝ
    // - ะัะตะฒััะตะฝะพ ะฒัะตะผั ะพะถะธะดะฐะฝะธั (timeout)

    errorMessage += "ะะต ัะดะฐะปะพัั ะฟะพะปััะธัั ะพัะฒะตั ะพั ัะตัะฒะตัะฐ.";

  } else {
    // ะขะะ 3: ะัะธะฑะบะฐ ะฟัะธ ะฝะฐัััะพะนะบะต ะทะฐะฟัะพัะฐ
    // ะญัะพ ะทะฝะฐัะธั: ะพัะธะฑะบะฐ ะฒ ัะฐะผะพะผ ะบะพะดะต

    // ะัะธัะธะฝั:
    // - ะะตะฟัะฐะฒะธะปัะฝัะน URL
    // - ะะตะฟัะฐะฒะธะปัะฝัะต ะฟะฐัะฐะผะตััั
    // - ะัะธะฑะบะฐ ะฒ ะบะพะดะต

    errorMessage += "ะัะธะฑะบะฐ ะฟัะธ ะฒัะฟะพะปะฝะตะฝะธะธ ะทะฐะฟัะพัะฐ.";
  }

  // ะจะะ 3.4: ะะพะบะฐะทัะฒะฐะตะผ ัะพะพะฑัะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั
  res.render("index.ejs", { content: errorMessage });
})
```

**ะงัะพ ะฟัะพะธััะพะดะธั ะฟะพัะฐะณะพะฒะพ:**

1. ะัะพะธะทะพัะปะฐ ะพัะธะฑะบะฐ (ะปัะฑะฐั)
2. ะะพะด ะฟะพะฟะฐะดะฐะตั ะฒ `.catch()`
3. ะะพะณะธััะตะผ ะพัะธะฑะบั ะดะปั ัะตะฑั
4. ะะฟัะตะดะตะปัะตะผ ัะธะฟ ะพัะธะฑะบะธ
5. ะคะพัะผะธััะตะผ ะฟะพะฝััะฝะพะต ัะพะพะฑัะตะฝะธะต
6. ะะพะบะฐะทัะฒะฐะตะผ ะฟะพะปัะทะพะฒะฐัะตะปั

---

## ๐๏ธ ะะพะปะฝัะน ะฟัะธะผะตั ั ะฟะพะดัะพะฑะฝัะผะธ ะบะพะผะผะตะฝัะฐัะธัะผะธ

### ะัะธะผะตั: Axios ะทะฐะฟัะพั ั .then().catch()

```javascript
app.get("/", (req, res) => {
  // ============================================
  // ะจะะ 1: ะะะะะะะฆะะฏ ะะฅะะะะซะฅ ะะะะะซะฅ
  // ============================================

  // ะัะพะฒะตััะตะผ, ััะพ ะฟะพะปัะทะพะฒะฐัะตะปั ะฒะฒะตะป ะดะฐะฝะฝัะต
  if (!req.query.medicinalproduct) {
    // ! ะพะทะฝะฐัะฐะตั "ะะ" - "ะตัะปะธ ะะะข ะดะฐะฝะฝัั"
    // ะัะปะธ ะดะฐะฝะฝัั ะฝะตั, ะพััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฒัะฟะพะปะฝะตะฝะธะต (return)
    // ะธ ะฟะพะบะฐะทัะฒะฐะตะผ ัะพะพะฑัะตะฝะธะต
    return res.render("index.ejs", {
      content: "ะะพะถะฐะปัะนััะฐ, ะฒะฒะตะดะธัะต ะฝะฐะทะฒะฐะฝะธะต ะฟัะตะฟะฐัะฐัะฐ",
    });
  }

  // ะัะปะธ ะผั ะดะพัะปะธ ััะดะฐ, ะทะฝะฐัะธั ะดะฐะฝะฝัะต ะตััั
  // ะัะพะดะพะปะถะฐะตะผ ะฒัะฟะพะปะฝะตะฝะธะต

  // ============================================
  // ะจะะ 2: ะะซะะะะะะะะ ะะะะะะกะ
  // ============================================

  axios
    .get(API_URL, {
      params: {
        // params - ััะพ ะฟะฐัะฐะผะตััั ะทะฐะฟัะพัะฐ (query string)
        // ะะฝะธ ะดะพะฑะฐะฒัััั ะบ URL ะบะฐะบ ?search=...&count=...
        search: "patient.drug.medicinalproduct:" + req.query.medicinalproduct,
        count: "patient.reaction.reactionmeddrapt.exact",
        limit: 10,
      },
    })

    // ============================================
    // ะจะะ 3: ะะะะะะะขะะ ะฃะกะะะจะะะะ ะะขะะะขะ
    // ============================================

    .then((response) => {
      // .then() ะฒัะฟะพะปะฝะธััั, ะตัะปะธ ะทะฐะฟัะพั ััะฟะตัะตะฝ
      // response - ััะพ ะพะฑัะตะบั ั ะพัะฒะตัะพะผ ะพั API

      // ะกัััะบัััะฐ response:
      // {
      //   data: { results: [...] },  // ะะฐะฝะฝัะต
      //   status: 200,                // ะะพะด ััะฐัััะฐ
      //   statusText: "OK",           // ะขะตะบัั ััะฐัััะฐ
      //   headers: { ... },           // ะะฐะณะพะปะพะฒะบะธ
      //   config: { ... }             // ะะพะฝัะธะณััะฐัะธั ะทะฐะฟัะพัะฐ
      // }

      // ะะพะณะธััะตะผ ะดะปั ะพัะปะฐะดะบะธ (ะฒะธะดะฝะพ ะฒ ะบะพะฝัะพะปะธ ัะตัะฒะตัะฐ)
      console.log("Response received:", response.data.results);

      // ============================================
      // ะจะะ 3.1: ะะะะะะะะ ะะะะฃะะฌะขะะขะ
      // ============================================

      // ะัะพะฒะตััะตะผ, ััะพ results ัััะตััะฒัะตั ะธ ะฝะต ะฟัััะพะน
      if (!response.data.results || response.data.results.length === 0) {
        // ะัะปะธ ัะตะทัะปััะฐัะพะฒ ะฝะตั:
        // - ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ะฒัะฟะพะปะฝะตะฝะธะต (return)
        // - ะะพะบะฐะทัะฒะฐะตะผ ะฟะพะฝััะฝะพะต ัะพะพะฑัะตะฝะธะต
        return res.render("index.ejs", {
          content: "ะัะตะฟะฐัะฐั ะฝะต ะฝะฐะนะดะตะฝ. ะัะพะฒะตัััะต ะฟัะฐะฒะธะปัะฝะพััั ะฝะฐะฟะธัะฐะฝะธั.",
        });
      }

      // ะัะปะธ ะผั ะดะพัะปะธ ััะดะฐ, ะทะฝะฐัะธั ะดะฐะฝะฝัะต ะตััั
      // ะะพะถะฝะพ ะฑะตะทะพะฟะฐัะฝะพ ะพะฑัะฐะฑะฐััะฒะฐัั

      // ============================================
      // ะจะะ 3.2: ะะะะะะะขะะ ะะะะะซะฅ
      // ============================================

      // response.data.results - ััะพ ะผะฐััะธะฒ ะพะฑัะตะบัะพะฒ
      // ะะฐะฟัะธะผะตั: [{ term: "Headache", count: 123 }, ...]

      // .map() - ะฟัะตะพะฑัะฐะทัะตั ะบะฐะถะดัะน ัะปะตะผะตะฝั ะผะฐััะธะฒะฐ
      // item => item.term - ะฑะตัะตั ัะพะปัะบะพ ะฟะพะปะต "term" ะธะท ะบะฐะถะดะพะณะพ ะพะฑัะตะบัะฐ
      const terms = response.data.results.map((item) => item.term);
      // ะะตะทัะปััะฐั: ["Headache", "Nausea", "Dizziness", ...]

      // .join(", ") - ะพะฑัะตะดะธะฝัะตั ัะปะตะผะตะฝัั ะผะฐััะธะฒะฐ ะฒ ัััะพะบั
      // ะะฐะทะดะตะปะธัะตะปั - ", " (ะทะฐะฟััะฐั ะธ ะฟัะพะฑะตะป)
      const content = terms.join(", ");
      // ะะตะทัะปััะฐั: "Headache, Nausea, Dizziness, ..."

      // ะะพะบะฐะทัะฒะฐะตะผ ัะตะทัะปััะฐั ะฟะพะปัะทะพะฒะฐัะตะปั
      res.render("index.ejs", { content: content });
    })

    // ============================================
    // ะจะะ 4: ะะะะะะะขะะ ะะจะะะะ
    // ============================================

    .catch((error) => {
      // .catch() ะฒัะฟะพะปะฝะธััั, ะตัะปะธ ะฟัะพะธะทะพัะปะฐ ะะฎะะะฏ ะพัะธะฑะบะฐ
      // ะฒ ะทะฐะฟัะพัะต ะธะปะธ ะฒ ะพะฑัะฐะฑะพัะบะต ะดะฐะฝะฝัั

      // ============================================
      // ะจะะ 4.1: ะะะะะะะะะะะ ะะจะะะะ
      // ============================================

      // ะะพะณะธััะตะผ ะฟะพะปะฝัั ะพัะธะฑะบั ะดะปั ะพัะปะฐะดะบะธ
      console.error("Full error object:", error);
      console.error("Error message:", error.message);

      // ะญัะพ ะฟะพะผะพะถะตั ัะตะฑะต ะฟะพะฝััั, ััะพ ะฟะพัะปะพ ะฝะต ัะฐะบ
      // ะะธะดะฝะพ ะฒ ะบะพะฝัะพะปะธ ัะตัะฒะตัะฐ (ัะตัะผะธะฝะฐะป)

      // ============================================
      // ะจะะ 4.2: ะกะะะะะะะ ะะะะะะะะ ะกะะะะฉะะะะฏ
      // ============================================

      // ะกะพะทะดะฐะตะผ ะฟะตัะตะผะตะฝะฝัั ะดะปั ัะพะพะฑัะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปั
      let errorMessage = "ะัะธะฑะบะฐ ะฟัะธ ะฟะพะธัะบะต ะฟัะตะฟะฐัะฐัะฐ. ";

      // ============================================
      // ะจะะ 4.3: ะะะะะะะะะะะ ะขะะะ ะะจะะะะ
      // ============================================

      // ะฃ Axios ะตััั 3 ัะธะฟะฐ ะพัะธะฑะพะบ
      // ะัะพะฒะตััะตะผ ะธั ะฟะพ ะฟะพััะดะบั:

      if (error.response) {
        // ะกะะฃะงะะ 1: API ะฒะตัะฝัะป ะพัะธะฑะบั
        // ะะฐะฟัะพั ะดะพัะตะป ะดะพ ัะตัะฒะตัะฐ, ัะตัะฒะตั ะพัะฒะตัะธะป ั ะพัะธะฑะบะพะน

        // error.response ัะพะดะตัะถะธั:
        // - status: ะบะพะด ะพัะธะฑะบะธ (404, 500 ะธ ั.ะด.)
        // - statusText: ัะตะบัั ะพัะธะฑะบะธ ("Not Found", "Internal Server Error")
        // - data: ะดะฐะฝะฝัะต ะพะฑ ะพัะธะฑะบะต ะพั ัะตัะฒะตัะฐ

        console.log("API returned error:", error.response.status);

        // ะััะฐะตะผัั ะฒะทััั ัะพะพะฑัะตะฝะธะต ะพะฑ ะพัะธะฑะบะต ะพั ัะตัะฒะตัะฐ
        // ะัะฟะพะปัะทัะตะผ optional chaining (?.) ะดะปั ะฑะตะทะพะฟะฐัะฝะพััะธ
        const serverMessage = error.response.data?.error?.message;

        if (serverMessage) {
          // ะัะปะธ ัะตัะฒะตั ะฒะตัะฝัะป ัะพะพะฑัะตะฝะธะต - ะธัะฟะพะปัะทัะตะผ ะตะณะพ
          errorMessage += serverMessage;
        } else {
          // ะัะปะธ ัะพะพะฑัะตะฝะธั ะฝะตั - ะฟะพะบะฐะทัะฒะฐะตะผ ะบะพะด ััะฐัััะฐ
          errorMessage += `ะกัะฐััั: ${error.response.status}`;
        }
      } else if (error.request) {
        // ะกะะฃะงะะ 2: ะะฐะฟัะพั ะพัะฟัะฐะฒะปะตะฝ, ะฝะพ ะพัะฒะตัะฐ ะฝะตั
        // ะะฐะฟัะพั ััะตะป, ะฝะพ ัะตัะฒะตั ะฝะต ะพัะฒะตัะธะป

        console.log("No response received");

        // ะัะธัะธะฝั:
        // - ะะตั ะธะฝัะตัะฝะตัะฐ
        // - ะกะตัะฒะตั ะฝะตะดะพัััะฟะตะฝ
        // - ะัะตะฒััะตะฝะพ ะฒัะตะผั ะพะถะธะดะฐะฝะธั

        errorMessage +=
          "ะะต ัะดะฐะปะพัั ะฟะพะปััะธัั ะพัะฒะตั ะพั ัะตัะฒะตัะฐ. ะัะพะฒะตัััะต ะฟะพะดะบะปััะตะฝะธะต ะบ ะธะฝัะตัะฝะตัั.";
      } else {
        // ะกะะฃะงะะ 3: ะัะธะฑะบะฐ ะฟัะธ ะฝะฐัััะพะนะบะต ะทะฐะฟัะพัะฐ
        // ะัะธะฑะบะฐ ะฒ ัะฐะผะพะผ ะบะพะดะต

        console.log("Request setup error:", error.message);

        // ะัะธัะธะฝั:
        // - ะะตะฟัะฐะฒะธะปัะฝัะน URL
        // - ะะตะฟัะฐะฒะธะปัะฝัะต ะฟะฐัะฐะผะตััั
        // - ะัะธะฑะบะฐ ะฒ ะบะพะดะต

        errorMessage += "ะัะธะฑะบะฐ ะฟัะธ ะฒัะฟะพะปะฝะตะฝะธะธ ะทะฐะฟัะพัะฐ.";
      }

      // ============================================
      // ะจะะ 4.4: ะะะะะ ะกะะะะฉะะะะฏ ะะะะฌะะะะะขะะะฎ
      // ============================================

      // ะะพะบะฐะทัะฒะฐะตะผ ะฟะพะฝััะฝะพะต ัะพะพะฑัะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั
      res.render("index.ejs", { content: errorMessage });
    });
});
```

---

### ะัะธะผะตั: async/await (ัะพะฒัะตะผะตะฝะฝัะน ัะฟะพัะพะฑ)

```javascript
app.get("/", async (req, res) => {
  // async - ะพะทะฝะฐัะฐะตั, ััะพ ััะฝะบัะธั ะฐัะธะฝััะพะฝะฝะฐั
  // ะญัะพ ะฟะพะทะฒะพะปัะตั ะธัะฟะพะปัะทะพะฒะฐัั await ะฒะฝัััะธ

  try {
    // try - ะฑะปะพะบ, ะณะดะต ะผะพะถะตั ะฟัะพะธะทะพะนัะธ ะพัะธะฑะบะฐ
    // ะัะปะธ ะพัะธะฑะบะฐ ะฟัะพะธะทะพะนะดะตั, ะบะพะด ะฟะตัะตะนะดะตั ะฒ catch

    // ============================================
    // ะจะะ 1: ะะะะะะะฆะะฏ
    // ============================================

    if (!req.query.medicinalproduct) {
      return res.render("index.ejs", {
        content: "ะะพะถะฐะปัะนััะฐ, ะฒะฒะตะดะธัะต ะฝะฐะทะฒะฐะฝะธะต ะฟัะตะฟะฐัะฐัะฐ",
      });
    }

    // ============================================
    // ะจะะ 2: ะะซะะะะะะะะ ะะะะะะกะ
    // ============================================

    // await - ะถะดะตั, ะฟะพะบะฐ ะทะฐะฟัะพั ะฒัะฟะพะปะฝะธััั
    // ะะพะด ะพััะฐะฝะฐะฒะปะธะฒะฐะตััั ะทะดะตัั ะธ ะถะดะตั ะพัะฒะตัะฐ
    const response = await axios.get(API_URL, {
      params: {
        search: "patient.drug.medicinalproduct:" + req.query.medicinalproduct,
        count: "patient.reaction.reactionmeddrapt.exact",
        limit: 10,
      },
    });

    // ะัะปะธ ะทะฐะฟัะพั ััะฟะตัะตะฝ, response ัะพะดะตัะถะธั ะพัะฒะตั
    // ะัะปะธ ะทะฐะฟัะพั ัะฟะฐะป ั ะพัะธะฑะบะพะน, ะบะพะด ะฟะตัะตะนะดะตั ะฒ catch

    // ============================================
    // ะจะะ 3: ะะะะะะะะ ะะะะฃะะฌะขะะขะ
    // ============================================

    if (!response.data.results || response.data.results.length === 0) {
      return res.render("index.ejs", {
        content: "ะัะตะฟะฐัะฐั ะฝะต ะฝะฐะนะดะตะฝ. ะัะพะฒะตัััะต ะฟัะฐะฒะธะปัะฝะพััั ะฝะฐะฟะธัะฐะฝะธั.",
      });
    }

    // ============================================
    // ะจะะ 4: ะะะะะะะขะะ ะะะะะซะฅ
    // ============================================

    const content = response.data.results.map((item) => item.term).join(", ");

    res.render("index.ejs", { content: content });
  } catch (error) {
    // catch - ะฑะปะพะบ, ะบะพัะพััะน ะฒัะฟะพะปะฝะธััั ะฟัะธ ะะฎะะะ ะพัะธะฑะบะต
    // ะฒ ะฑะปะพะบะต try

    // ============================================
    // ะะะะะะะขะะ ะะจะะะะ (ัะฐ ะถะต ะปะพะณะธะบะฐ, ััะพ ะธ ะฒััะต)
    // ============================================

    console.error("Error:", error);

    let errorMessage = "ะัะธะฑะบะฐ ะฟัะธ ะฟะพะธัะบะต ะฟัะตะฟะฐัะฐัะฐ. ";

    if (error.response) {
      errorMessage +=
        error.response.data?.error?.message ||
        `ะกัะฐััั: ${error.response.status}`;
    } else if (error.request) {
      errorMessage += "ะะต ัะดะฐะปะพัั ะฟะพะปััะธัั ะพัะฒะตั ะพั ัะตัะฒะตัะฐ.";
    } else {
      errorMessage += "ะัะธะฑะบะฐ ะฟัะธ ะฒัะฟะพะปะฝะตะฝะธะธ ะทะฐะฟัะพัะฐ.";
    }

    res.render("index.ejs", { content: errorMessage });
  }
});
```

**ะัะตะธะผััะตััะฒะฐ async/await:**

- ะะพะด ัะธัะฐะตััั ะบะฐะบ ะพะฑััะฝัะน ัะธะฝััะพะฝะฝัะน ะบะพะด
- ะะตะณัะต ะฟะพะฝััั ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััั
- ะัะพัะต ะพะฑัะฐะฑะฐััะฒะฐัั ะพัะธะฑะบะธ (ะพะดะธะฝ catch ะดะปั ะฒัะตะณะพ)

---

## ๐ ะะปััะตะฒัะต ะฟะพะฝััะธั (ะพะฑัััะฝะตะฝะธะต)

### 1. `if (!ะดะฐะฝะฝัะต)` - ััะพ ััะพ ะทะฝะฐัะธั?

```javascript
if (!req.query.medicinalproduct) {
  // ะัะฟะพะปะฝะธััั, ะตัะปะธ medicinalproduct:
  // - undefined (ะฝะต ะพะฟัะตะดะตะปะตะฝะพ)
  // - null (ะฟัััะพ)
  // - "" (ะฟัััะฐั ัััะพะบะฐ)
  // - 0 (ะฝะพะปั)
  // - false (ะปะพะถั)
}
```

**ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั:**

- `!` - ะพะฟะตัะฐัะพั "ะะ" (ะธะฝะฒะตััะธั)
- `!true` = `false`
- `!false` = `true`
- `!undefined` = `true` (ะฟะพัะพะผั ััะพ undefined ััะธัะฐะตััั "ะปะพะถะฝัะผ")

### 2. `return` - ะทะฐัะตะผ ะพะฝ ะฝัะถะตะฝ?

```javascript
if (!req.query.medicinalproduct) {
  return res.render(...); // ะััะฐะฝะฐะฒะปะธะฒะฐะตั ะฒัะฟะพะปะฝะตะฝะธะต ััะฝะบัะธะธ
}

// ะญัะพั ะบะพะด ะะ ะฒัะฟะพะปะฝะธััั, ะตัะปะธ ะฑัะป return ะฒััะต
console.log("ะญัะพ ะฝะต ะฒัะฟะพะปะฝะธััั");
```

**ะะตะท return:**

```javascript
if (!req.query.medicinalproduct) {
  res.render(...); // ะะพะบะฐะทัะฒะฐะตั ัะพะพะฑัะตะฝะธะต
}
// ะะพ ะบะพะด ะฟัะพะดะพะปะถะฐะตััั ะดะฐะปััะต!
axios.get(...); // ะ ะฟััะฐะตััั ัะดะตะปะฐัั ะทะฐะฟัะพั ั ะฟััััะผะธ ะดะฐะฝะฝัะผะธ - ะะจะะะะ!
```

**ะก return:**

```javascript
if (!req.query.medicinalproduct) {
  return res.render(...); // ะะพะบะฐะทัะฒะฐะตั ัะพะพะฑัะตะฝะธะต ะ ะพััะฐะฝะฐะฒะปะธะฒะฐะตััั
}
// ะญัะพั ะบะพะด ะฝะต ะฒัะฟะพะปะฝะธััั, ะตัะปะธ ะฑัะป return
axios.get(...); // ะะตะทะพะฟะฐัะฝะพ!
```

### 3. Optional chaining `?.` - ััะพ ััะพ?

```javascript
// ะะะ optional chaining:
error.response.data.error.message;
// ะัะปะธ data = undefined, ะฑัะดะตั ะพัะธะฑะบะฐ:
// "Cannot read property 'error' of undefined"

// ะก optional chaining:
error.response.data?.error?.message;
// ะัะปะธ data = undefined, ะฒะตัะฝะตััั undefined (ะฑะตะท ะพัะธะฑะบะธ)
```

**ะะฐะบ ัะฐะฑะพัะฐะตั:**

- `?.` ะฟัะพะฒะตััะตั, ัััะตััะฒัะตั ะปะธ ัะฒะพะนััะฒะพ
- ะัะปะธ ัะฒะพะนััะฒะพ ัััะตััะฒัะตั โ ะฒะพะทะฒัะฐัะฐะตั ะตะณะพ ะทะฝะฐัะตะฝะธะต
- ะัะปะธ ัะฒะพะนััะฒะฐ ะฝะตั โ ะฒะพะทะฒัะฐัะฐะตั `undefined` (ะฑะตะท ะพัะธะฑะบะธ)

**ะัะธะผะตัั:**

```javascript
const obj = { a: { b: { c: 5 } } };

obj.a.b.c; // 5
obj.a.b?.c; // 5 (ัะพ ะถะต ัะฐะผะพะต)
obj.x?.y; // undefined (x ะฝะต ัััะตััะฒัะตั, ะฝะพ ะพัะธะฑะบะธ ะฝะตั)
obj.a.b.c.d; // ะะจะะะะ! (d ะฝะต ัััะตััะฒัะตั)
obj.a.b.c?.d; // undefined (ะฑะตะท ะพัะธะฑะบะธ)
```

### 4. `||` (ะะะ) - ะบะฐะบ ัะฐะฑะพัะฐะตั?

```javascript
if (!response.data.results || response.data.results.length === 0) {
  // ะกัะฐะฑะพัะฐะตั, ะตัะปะธ:
  // - ะะะข results ะะะ
  // - ะดะปะธะฝะฐ results = 0
}
```

**ะะพะณะธะบะฐ:**

- `A || B` - ะฒะตัะฝะตั `true`, ะตัะปะธ ัะพัั ะฑั ะพะดะฝะพ ััะปะพะฒะธะต `true`
- `false || true` = `true`
- `true || false` = `true`
- `false || false` = `false`

**ะัะฐะบัะธัะตัะบะธะน ะฟัะธะผะตั:**

```javascript
// ะัะปะธ results ะฝะตั (undefined)
!undefined || undefined.length === 0
// true || (ะพัะธะฑะบะฐ, ะฝะพ ะฝะต ะฒัะฟะพะปะฝะธััั, ั.ะบ. ะฟะตัะฒะพะต ัะถะต true)
// ะะตะทัะปััะฐั: true

// ะัะปะธ results ะตััั, ะฝะพ ะฟัััะพะน ะผะฐััะธะฒ
![...] || [].length === 0
// false || true
// ะะตะทัะปััะฐั: true
```

### 5. `.then()` ะธ `.catch()` - ะบะฐะบ ัะฐะฑะพัะฐัั?

```javascript
axios
  .get(URL)
  .then((response) => {
    // ะัะฟะพะปะฝะธััั, ะตัะปะธ ะทะฐะฟัะพั ะฃะกะะะจะะ
    // response - ััะพ ะพัะฒะตั ะพั ัะตัะฒะตัะฐ
  })
  .catch((error) => {
    // ะัะฟะพะปะฝะธััั, ะตัะปะธ ะทะฐะฟัะพั ะฃะะะ ะก ะะจะะะะะ
    // error - ััะพ ะพะฑัะตะบั ั ะธะฝัะพัะผะฐัะธะตะน ะพะฑ ะพัะธะฑะบะต
  });
```

**ะะธะทัะฐะปัะฝะพ:**

```
ะะฐะฟัะพั
  โ
  โโโ ะฃัะฟะตั โ .then() โ ะพะฑัะฐะฑะฐััะฒะฐะตะผ ะดะฐะฝะฝัะต
  โ
  โโโ ะัะธะฑะบะฐ โ .catch() โ ะพะฑัะฐะฑะฐััะฒะฐะตะผ ะพัะธะฑะบั
```

### 6. `async/await` vs `.then().catch()`

**ะก .then().catch():**

```javascript
axios
  .get(URL)
  .then((response) => {
    // ะะฑัะฐะฑะพัะบะฐ ััะฟะตัะฐ
  })
  .catch((error) => {
    // ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะบะธ
  });
```

**ะก async/await:**

```javascript
try {
  const response = await axios.get(URL);
  // ะะฑัะฐะฑะพัะบะฐ ััะฟะตัะฐ
} catch (error) {
  // ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะบะธ
}
```

**ะะฐะทะฝะธัะฐ:**

- `.then().catch()` - ัะตะฟะพัะบะฐ ะฒัะทะพะฒะพะฒ (callback style)
- `async/await` - ะฒัะณะปัะดะธั ะบะฐะบ ะพะฑััะฝัะน ะบะพะด (ะฟัะพัะต ัะธัะฐัั)

---

## โ ะงะตะบ-ะปะธัั: ะัะตะณะดะฐ ะดะตะปะฐะน ัะฐะบ

### ะะตัะตะด ะฝะฐะฟะธัะฐะฝะธะตะผ ะบะพะดะฐ:

1. โ **ะะพะดัะผะฐะน: ะบะฐะบะธะต ะดะฐะฝะฝัะต ะฝัะถะฝั?**

   - ะงัะพ ะดะพะปะถะตะฝ ะฒะฒะตััะธ ะฟะพะปัะทะพะฒะฐัะตะปั?
   - ะ ะบะฐะบะพะผ ัะพัะผะฐัะต?

2. โ **ะะพะดัะผะฐะน: ััะพ ะผะพะถะตั ะฟะพะนัะธ ะฝะต ัะฐะบ?**

   - ะะพะปัะทะพะฒะฐัะตะปั ะฝะต ะฒะฒะตะป ะดะฐะฝะฝัะต
   - ะะฐะฝะฝัะต ะฝะต ะฝะฐะนะดะตะฝั
   - API ะฝะตะดะพัััะฟะตะฝ
   - ะัะธะฑะบะฐ ัะตัะธ

3. โ **ะะพะดัะผะฐะน: ััะพ ะฟะพะบะฐะทะฐัั ะฟะพะปัะทะพะฒะฐัะตะปั?**
   - ะะพะฝััะฝัะต ัะพะพะฑัะตะฝะธั
   - ะะต ัะตัะฝะธัะตัะบะธะต ัะตัะผะธะฝั

### ะัะธ ะฝะฐะฟะธัะฐะฝะธะธ ะบะพะดะฐ:

1. โ **ะจะะ 1: ะะฐะปะธะดะฐัะธั**

   ```javascript
   if (!ะดะฐะฝะฝัะต) {
     return res.render("index.ejs", {
       content: "ะะพะฝััะฝะพะต ัะพะพะฑัะตะฝะธะต",
     });
   }
   ```

2. โ **ะจะะ 2: ะะฐะฟัะพั ั ะพะฑัะฐะฑะพัะบะพะน ะพัะธะฑะพะบ**

   ```javascript
   try {
     const response = await axios.get(URL);
     // ะธะปะธ
     axios.get(URL).then(...).catch(...);
   } catch (error) {
     // ะพะฑัะฐะฑะพัะบะฐ
   }
   ```

3. โ **ะจะะ 3: ะัะพะฒะตัะบะฐ ัะตะทัะปััะฐัะฐ**

   ```javascript
   if (!ัะตะทัะปััะฐั || ัะตะทัะปััะฐั.length === 0) {
     return res.render("index.ejs", {
       content: "ะะฐะฝะฝัะต ะฝะต ะฝะฐะนะดะตะฝั",
     });
   }
   ```

4. โ **ะจะะ 4: ะะฑัะฐะฑะพัะบะฐ ะดะฐะฝะฝัั**

   ```javascript
   // ะะตะทะพะฟะฐัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ะดะฐะฝะฝัั
   res.render("index.ejs", { content: ะดะฐะฝะฝัะต });
   ```

5. โ **ะจะะ 5: ะะพะณะธัะพะฒะฐะฝะธะต ะพัะธะฑะพะบ**
   ```javascript
   console.error("Error:", error);
   ```

---

## ๐ ะะฐะฟะพะผะฝะธ ัะพัะผัะปั:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  1. ะะะะะะะฆะะฏ (ะฟัะพะฒะตัะบะฐ ะฒัะพะดะฝัั ะดะฐะฝะฝัั) โ
โ     โ                                    โ
โ  2. ะะะะะะก (axios.get, fetch ะธ ั.ะด.)    โ
โ     โ                                    โ
โ  3. ะะะะะะะะ ะะะะฃะะฌะขะะขะ (ะดะฐะฝะฝัะต ะตััั?)  โ
โ     โ                                    โ
โ  4. ะะะะะะะขะะ ะะะะะซะฅ (ััะฟะตั)            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
           โ (ะตัะปะธ ะพัะธะฑะบะฐ ะฝะฐ ะปัะฑะพะผ ััะฐะฟะต)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  5. ะะะะะะะขะะ ะะจะะะะ (catch)            โ
โ     - ะะฟัะตะดะตะปะธ ัะธะฟ ะพัะธะฑะบะธ               โ
โ     - ะะพะบะฐะถะธ ะฟะพะฝััะฝะพะต ัะพะพะฑัะตะฝะธะต         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะัะตะณะดะฐ ัะปะตะดัะน ััะพะน ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััะธ!**

---

## ๐ก ะะพะปะตะทะฝัะต ัะพะฒะตัั

### 1. ะัะฟะพะปัะทัะน optional chaining `?.`

```javascript
// ะะปะพัะพ:
error.response.data.error.message; // ะะพะถะตั ัะฟะฐััั

// ะฅะพัะพัะพ:
error.response?.data?.error?.message; // ะะตะทะพะฟะฐัะฝะพ
```

### 2. ะะพะณะธััะน ะดะปั ะพัะปะฐะดะบะธ

```javascript
console.error("Full error:", error);
console.error("Error message:", error.message);
console.error("Error stack:", error.stack);
```

### 3. ะะพะบะฐะทัะฒะฐะน ัะฐะทะฝัะต ัะพะพะฑัะตะฝะธั ะดะปั ัะฐะทะฝัั ะพัะธะฑะพะบ

```javascript
if (error.response?.status === 404) {
  message = "ะะต ะฝะฐะนะดะตะฝะพ";
} else if (error.response?.status === 500) {
  message = "ะัะธะฑะบะฐ ัะตัะฒะตัะฐ";
} else {
  message = "ะัะพะธะทะพัะปะฐ ะพัะธะฑะบะฐ";
}
```

### 4. ะขะตััะธััะน ะพะฑัะฐะฑะพัะบั ะพัะธะฑะพะบ

- ะะฒะตะดะธ ะฟััััะต ะดะฐะฝะฝัะต
- ะะฒะตะดะธ ะฝะตะฟัะฐะฒะธะปัะฝัะต ะดะฐะฝะฝัะต
- ะัะบะปััะธ ะธะฝัะตัะฝะตั
- ะะฒะตะดะธ ะฝะตัััะตััะฒัััะธะน ะฟัะตะฟะฐัะฐั

### 5. ะัะฟะพะปัะทัะน async/await

- ะัะพัะต ัะธัะฐัั
- ะัะพัะต ะฟะพะฝะธะผะฐัั
- ะัะพัะต ะพัะปะฐะถะธะฒะฐัั

---

## ๐ ะะตะทัะผะต

**ะัะตะณะดะฐ ะฟะพะผะฝะธ:**

1. **ะะฐะปะธะดะฐัะธั** โ ะฟัะพะฒะตััะน ะดะฐะฝะฝัะต ะะะะะ ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ
2. **ะัะพะฒะตัะบะฐ ัะตะทัะปััะฐัะฐ** โ ะฟัะพะฒะตััะน ะดะฐะฝะฝัะต ะะะกะะ ะฟะพะปััะตะฝะธั
3. **ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ** โ ะปะพะฒะธ ะะกะ ะพัะธะฑะบะธ ะธ ะฟะพะบะฐะทัะฒะฐะน ะฟะพะฝััะฝัะต ัะพะพะฑัะตะฝะธั
4. **ะะพะณะธัะพะฒะฐะฝะธะต** โ ะปะพะณะธััะน ะพัะธะฑะบะธ ะดะปั ัะตะฑั
5. **ะะพะฝััะฝัะต ัะพะพะฑัะตะฝะธั** โ ะฟะพะบะฐะทัะฒะฐะน ะฟะพะปัะทะพะฒะฐัะตะปั ะฟะพะฝััะฝัะต ัะพะพะฑัะตะฝะธั

**ะคะพัะผัะปะฐ ััะฟะตัะฐ:**

```
ะะฐะปะธะดะฐัะธั โ ะะฐะฟัะพั โ ะัะพะฒะตัะบะฐ โ ะฃัะฟะตั
                    โ (ะตัะปะธ ะพัะธะฑะบะฐ)
              ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ
```

**ะกะปะตะดัะน ััะพะน ัะพัะผัะปะต ะฒัะตะณะดะฐ, ะธ ัะฒะพะน ะบะพะด ะฑัะดะตั ะฝะฐะดะตะถะฝัะผ!** ๐
